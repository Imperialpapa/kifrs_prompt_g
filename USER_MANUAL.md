# K-IFRS 1019 DBO 데이터 검증 시스템 사용자 매뉴얼

## 1. 시스템 개요
본 시스템은 K-IFRS 1019호(확정급여제도)에 따른 퇴직급여부채(DBO) 평가를 위한 직원 데이터의 정합성을 검증하는 자동화 도구입니다. Python FastAPI 백엔드와 Alpine.js 기반의 프론트엔드로 구성되어 있으며, AI 기술을 활용하여 검증 규칙을 자연어로 해석하고 데이터 오류를 지능적으로 분석합니다.

### 주요 기능
- **지능형 데이터 전처리:** 데이터가 없는 무의미한 행(주석, 빈 줄 등)을 자동으로 감지하여 제외합니다. **사번과 입사일자가 동시에 누락된 행**은 데이터로서 가치가 없다고 판단하여 검증 오류를 발생시키지 않고 무시됩니다.
- **K-IFRS 특화 검증:** 할인율, 임금상승률 등 보험수리적 가정이 합리적 범위(예: 1%~10%) 내에 있는지 자동으로 검증합니다.
- **규칙 관리:** 검증 규칙(Excel) 업로드, AI 해석, 버전 관리
- **AI 스마트 수정:** 발견된 오류에 대한 AI의 자동 수정 제안 및 일괄 적용
- **데이터 보안:** 주민등록번호 등 민감한 개인정보는 화면 표시 시 자동으로 마스킹(예: 800101-*******) 처리됩니다.
- **대시보드:** 시트별 오류 현황, 규칙 준수율, 통계 시각화. 특히 검증 현황 테이블은 **원본 엑셀의 컬럼 순서**대로 정렬되어 직관적인 대조가 가능합니다.
- **학습 시스템:** 사용자 피드백을 기반으로 AI 검증 정확도 향상

---

## 2. 시작 방법

### 사전 요구사항
- Windows 운영체제
- Docker (선택 사항, 데이터베이스 사용 시 권장)
- Python 3.9 이상 (로컬 실행 시)

### 실행 절차
1. **프로젝트 폴더 이동:** 탐색기에서 프로젝트 루트 디렉토리로 이동합니다.
2. **실행 스크립트 실행:** `run_local.bat` 파일을 더블 클릭합니다.
   - 필요한 라이브러리가 자동으로 설치됩니다.
   - 백엔드 서버(Port 8000)가 시작됩니다.
3. **접속:** 웹 브라우저(Chrome 권장)를 열고 `http://localhost:8000`으로 접속합니다.

---

## 3. 업무 절차 (Workflow)

### 1단계: 검증 규칙 준비 (최초 1회 또는 변경 시)
1. **[규칙 관리]** 메뉴로 이동합니다.
2. **규칙 파일 업로드:** 검증 규칙이 담긴 Excel 파일을 업로드합니다.
3. **AI 해석 검토:** 업로드 후 AI가 자동으로 규칙을 해석합니다. '매핑 검토' 화면에서 해석 결과를 확인하고 필요 시 수정합니다.
   - *팁: 규칙이 '부분 매핑'되거나 '미매핑'된 경우 수동으로 조정하여 정확도를 높일 수 있습니다.*

### 2단계: 데이터 검증 실행
1. **[파일 업로드]** 메뉴로 이동합니다.
2. **규칙 선택:** 왼쪽 '적용할 규칙' 드롭다운에서 1단계에서 등록한 규칙 파일을 선택합니다.
3. **데이터 업로드:** 검증할 직원 데이터(Excel)를 업로드합니다.
4. **검증 시작:** 파일이 업로드되면 자동으로 검증이 시작됩니다.
   - **자동 필터링:** **사번과 입사일자가 모두 없는 행**은 주석이나 메모로 간주하여 분석 대상에서 자동으로 제외합니다. (둘 중 하나라도 있으면 검증 수행)
   - **행 번호 유지:** 중간에 빈 행이 제외되더라도, 리포트에 표시되는 행 번호는 항상 **원본 엑셀 파일의 행 번호**와 일치합니다.
   - *참고: 시스템은 K-IFRS 1019 기준에 따라 입사일/퇴사일 논리, 입사 시 연령(만 15세 미만 등), 임금 이상치, 보험수리적 가정이 적절한지 자동으로 병행 검증합니다.*### 3단계: 결과 분석
1. **[검증 대시보드]**로 이동하여 전체적인 오류 현황을 파악합니다.
2. **시트별 상세 분석:** 
   - 상단의 **"규칙별 검증 현황"**에서 어떤 규칙이 위반되었는지 확인합니다. 목록은 엑셀 파일의 왼쪽 컬럼부터 순서대로 정렬됩니다.
   - 규칙을 클릭하면 하단에 상세 오류 목록(Drill-down)이 표시됩니다.
   - **개인정보 보호:** 주민등록번호 컬럼의 데이터는 뒷자리가 별표(`*******`)로 마스킹되어 표시됩니다.
3. **AI 데이터 검증 요약:** 화면 상단의 AI 요약을 통해 데이터의 전반적인 상태를 이해합니다.

### 4단계: 오류 수정 (AI 스마트 수정)
1. **[AI 스마트 수정]** 메뉴로 이동합니다.
2. AI가 제안하는 수정 사항(날짜 형식 변환, 공백 제거, 성별 코드 표준화 등)을 확인합니다.
3. 수정할 항목을 선택하고 **"수정 사항 적용"** 버튼을 클릭하여 수정된 Excel 파일을 다운로드합니다.

---

## 4. 참고 기능
- **통계 분석:** 전체 검증 이력과 자주 발생하는 오류 유형을 분석합니다.
- **참고 자료:** 전체 시트별 오류 분포 차트와 Top 5 인지 항목을 확인합니다.
- **상세 리포트:** 모든 오류 내역을 시트별로 검색하고 Excel로 추출할 수 있습니다.
- **AI 학습 현황:** AI가 사용자의 피드백을 통해 얼마나 똑똑해지고 있는지 통계를 제공합니다.

---

## 5. 기술 지원
- 시스템 사용 중 문제가 발생하면 `logs/` 폴더의 로그 파일을 확인하거나 관리자에게 문의하십시오.
- AI 모델 설정은 **[설정]** 메뉴에서 변경할 수 있습니다 (OpenAI, Gemini, Claude 지원).
